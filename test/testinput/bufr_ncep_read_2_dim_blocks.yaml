# (C) Copyright 2021 NOAA/NWS/NCEP/EMC
#
# This software is licensed under the terms of the Apache Licence Version 2.0
# which can be obtained at http://www.apache.org/licenses/LICENSE-2.0.

observations:
  - obs space:
      name: bufr
      obsdatain: "./testinput/bufr_read_2_dim_blocks.bufr"

      exports:
        variables:
          originatingGeneratingCenter:
            query: "*/OGCE"

          pressure:
            query: "*/QCPRMS/GNAP[1]"

          windDirection:
            query: "*/QCPRMS/GNAP[2]"

          windSpeed:
            query: "*/QCPRMS/GNAP[3]"

          coldClusterTemperature:
            query: "*/QCPRMS/GNAP[4]"

          percentConfidencePressure:
            query: "*/QCPRMS/PCCF[1]"

          percentConfidenceWindDirection:
            query: "*/QCPRMS/PCCF[2]"

          percentConfidenceWindSpeed:
            query: "*/QCPRMS/PCCF[3]"

          percentConfidenceColdClusterTemperature:
            query: "*/QCPRMS/PCCF[4]"

    ioda:
      backend: netcdf
      obsdataout: "./testrun/bufr_read_2_dim_blocks.nc"

      dimensions:
        - name: "ncols_conf"
          paths:
            - "*/QCPRMS"

      variables:
        - name: "MetaData/originatingGeneratingCenter"
          source: variables/originatingGeneratingCenter
          longName: "Originating Generating Center"
          units: "id"

        - name: "GeneratingApplication/pressure"
          source: variables/pressure
          longName: "air pressure"
          units: "id"

        - name: "GeneratingApplication/windDirection"
          source: variables/windDirection
          longName: "wind direction"
          units: "id"

        - name: "GeneratingApplication/windSpeed"
          source: variables/windSpeed
          longName: "wind speed"
          units: "id"

        - name: "GeneratingApplication/coldClusterTemperature"
          source: variables/coldClusterTemperature
          longName: "cold cluster temperature"
          units: "id"

        - name: "PercentConfidence/pressure"
          coordinates: "longitude latitude"
          source: variables/percentConfidencePressure
          longName: "Percent Confidence of Pressure"
          units: "percent"

        - name: "PercentConfidence/windDirection"
          coordinates: "longitude latitude"
          source: variables/percentConfidenceWindDirection
          longName: "Percent Confidence of Wind Direction"
          units: "percent"

        - name: "PercentConfidence/windSpeed"
          coordinates: "longitude latitude"
          source: variables/percentConfidenceWindSpeed
          longName: "Percent Confidence of Wind Speed"
          units: "percent"

        - name: "PercentConfidence/coldClusterTemperature"
          coordinates: "longitude latitude"
          source: variables/percentConfidenceColdClusterTemperature
          longName: "Percent Confidence of Clod Cluster Temperature"
          units: "percent"

